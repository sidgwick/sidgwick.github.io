---
title: "sed and awk 101 hacks 笔记"
date: 2023-03-24 02:28:04
tags: linux shell sed awk
---

> 图书在线阅读地址: [sed and awk 101 hacks](https://vds-admin.ru/sed-and-awk-101-hacks)

本文记录 _*[sed and awk 101 hacks](https://vds-admin.ru/sed-and-awk-101-hacks)*_ 一书中学到的知识点备忘.

- TOC
  {:toc}

# sed 部分

<!--more-->

1. `e` 将 pattern space 里面的内容当成命令执行, 并将执行结果当做 pattern space 的内容
2. 替换过程中的 `&` 字符
3. 正则匹配中的分组, 最多可以有 9 个
4. 注意反向引用(back references)术语

   - 反向引用不光可以用在要替换的字符串中, 也可以用在正则表达式本身.
   - `\(abc\)\1` 匹配 `abcabc`
   - 匹配两位一模一样的数字 `\([0-9]\)\1`

5. 替换字符串中的 \l, \L, \u, \U, \E 标记
6. 正则表达式

   - `\b` 单词边界, 可以用来表示单词的开始和结束
   - 开始结束 `^`, `$`
   - 匹配字符 `.`, `*`, `\+`, `\?`,
   - 转义 `\`
   - 字符集 `[]` ~~~ `[xxx]`, `[x-y]`
   - 或表达式 `|`

7. 正则表达式的 `{M,N}` 指定长度时, `M` 或者 `N` 的长度不可超过 255

   - `_{m}`
   - `_{m,n}`
   - `_{m,}`

8. `*.sed` 脚本中的头两个字符如果是 `#n`, sed 将会自动使用 `-n` 选项执行
9. `a`, `i` 命令其实可以支持多行写入
10. `c` 命令用于修改当前行, 和 `a`, `i` 类似, 他也可以支持多行写入
11. 注意 `l` 命令自带 print 效果
12. `=` 命令输出行号
13. `y` 命令用于将两个字符列表按照位置转换(transform)
14. sed 可以一次操作多个文本文件
15. `q` 在处理完成之后直接退出 sed 程序
16. `w` 命令用于将模式空间写到文件, `r` 命令用于将文件读到<标准输出还是模式空间?看上去不像是模式空间>
17. `x` 命令交换模式空间/保持空间
18. `g/G` 命令是 `get` 命令的缩写, 表示从保持空间拷贝/追加数据到模式空间
19. `h/H` 命令是 `hold` 命令的缩写, 表示从模式空间拷贝/追加数据到保持空间
20. `P` 多行模式空间的情况下, 仅输出第一行
21. `D` 多行模式空间的情况下, 仅删除第一行, 且不会将下一行读取到模式空间(对比 `d`), 并重新从头开始对模式空间内容执行命令
22. `b` 命令用于直接跳转到标号处
23. `t` 命令也是跳转到标号处, 但是有判断之前执行的替换操作是成功的这个前提才会跳转
